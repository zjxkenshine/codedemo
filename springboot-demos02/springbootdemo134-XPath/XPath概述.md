# 1.XPath概述
XPath是一门在XML文档中查找信息的语言。XPath可用来在XML文档中对元素和属性进行遍历

# 2.XPath术语
1. 节点
    - 在XPath中，有七种类型的节点：元素、属性、文本、命名空间、处理指令、注释以及文档（根）节点。XML文档是被作为节点树来对待的。树的根被称为文档节点或者根节点
2. 基本值（或称原子值，Atomic value）
    - 基本值是无父或无子的节点
3. 项目（Item）
    - 项目是基本值或者节点
4. 父（Parent）
    - 每个元素以及属性都有一个父
5. 子（Children）
    - 元素节点可有零个、一个或多个子
6. 同胞（Sibling）
    - 拥有相同的父的节点
7. 先辈（Ancestor）
    - 某节点的父、父的父，等等
8. 后代（Descendant）
    - 某个节点的子，子的子，等等

# 3.XPath语法
XPath使用路径表达式来选取XML文档中的节点或节点集。节点是通过沿着路径 (path) 或者步 (steps) 来选取的

## 3.1 选取节点
常用路径表达式
- `nodename`：选取此节点的所有子节点
- `/`：从根节点选取
- `//`：从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置
- `.`：选取当前节点
- `..`：选取当前节点的父节点
- `@`：选取属性

## 3.2 谓语（Predicates）
谓语用来查找某个特定的节点或者包含某个指定的值的节点。谓语被嵌在方括号中

| 路径表达式                        | 结果                                                         |
| --------------------------------- | ------------------------------------------------------------ |
| /class/student[1]                 | 选取属于class子元素的第一个student元素。                     |
| /class/student[last()]            | 选取属于class子元素的最后一个student元素。                   |
| /class/student[last()-1]          | 选取属于class子元素的倒数第二个student元素。                 |
| /class/student[position()<3]      | 选取最前面的两个属于class元素的子元素的student元素。         |
| //firstname[@lang]                | 选取所有拥有名为lang的属性的firstname元素。                  |
| //firstname[@lang='en']           | 选取所有firstname元素，且这些元素拥有值为en的lang属性。      |
| /class/student[marks>80]          | 选取class元素的所有student元素，且其中的marks元素的值须大于80。 |
| /class/student[marks>80]/lastname | 选取class元素中的student元素的所有lastname元素，且其中的marks元素的值须大于80。 |

## 3.3 选取未知节点
XPath通配符可用来选取未知的XML元素
- `*`：匹配任何元素节点
- `@*`：匹配任何属性节点
- `node()`：匹配任何类型的节点

## 3.4 选取若干路径
通过在路径表达式中使用“|”运算符可以选择若干路径
示例：
- `//student/firstname | //student/lastname`：选取student元素的所有firstname和lastname元素

# 4. XPath步（step）
1. 步（step）包括：
    - 轴（axis）:定义所选节点与当前节点之间的树关系
    - 节点测试（node-test）:识别某个轴内部的节点
    - 零个或者更多谓语（predicate）:更深入地提炼所选的节点集
2. 步语法：`轴名称::节点测试[谓语]`

## 4.1 XPath轴
| 轴名称             | 结果                                                     |
| ------------------ | -------------------------------------------------------- |
| ancestor           | 选取当前节点的所有先辈（父、祖父等）。                   |
| ancestor-or-self   | 选取当前节点的所有先辈（父、祖父等）以及当前节点本身。   |
| attribute          | 选取当前节点的所有属性。                                 |
| child              | 选取当前节点的所有子元素。                               |
| descendant         | 选取当前节点的所有后代元素（子、孙等）。                 |
| descendant-or-self | 选取当前节点的所有后代元素（子、孙等）以及当前节点本身。 |
| following          | 选取文档中当前节点的结束标签之后的所有节点。             |
| namespace          | 选取当前节点的所有命名空间节点。                         |
| parent             | 选取当前节点的父节点。                                   |
| preceding          | 选取文档中当前节点的开始标签之前的所有节点。             |
| preceding-sibling  | 选取当前节点之前的所有同级节点。                         |
| self               | 选取当前节点。                                           |


## 4.2 XPath运算符
| 运算符 | 描述           |
| ------ | -------------- |
| \|     | 计算两个节点集 |
| +      | 加法           |
| -      | 减法           |
| *      | 乘法           |
| div    | 除法           |
| =      | 等于           |
| !=     | 不等于         |
| <      | 小于           |
| <=     | 小于或等于     |
| >      | 大于           |
| >=     | 大于或等于     |
| or     | 或             |
| and    | 与             |
| mod    | 计算除法的余数 |